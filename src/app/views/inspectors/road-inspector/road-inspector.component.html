<!--
  ~ Copyright Truesense AI Solutions Pvt Ltd, All Rights Reserved.
  -->


<mat-toolbar class="native-border inspector-toolbar">
	<button (click)="isOpen=!isOpen"
		class="inspector-toolbar-icon"
		mat-icon-button>
		<mat-icon *ngIf="!isOpen">chevron_right</mat-icon>
		<mat-icon *ngIf="isOpen">expand_more</mat-icon>
	</button>
	<span>Road</span>
</mat-toolbar>

<div *ngIf="isOpen && road"
	class="inspector-editor-padding">

	<app-double-field [disabled]="true"
		[value]="road.length"
		label="Length"
		suffix="m"></app-double-field>

	<app-double-field (changed)="onRoadSpeedChanged($event)"
		[value]="roadSpeed"
		label="Speed Limit"
		max="200"
		min="0"
		suffix="m/s"></app-double-field>

	<app-enum-field (changed)="onRoadTypeChanged($event)"
		[enum]="roadTypesEnum"
		[value]="type"
		label="Road Type"></app-enum-field>

	<app-string-field [disabled]="true"
		[value]="data.spline.type"
		label="Spline"></app-string-field>

</div>

<div *ngIf="isOpen && road">

	<app-material-field (changed)="onDrivingMaterialChanged($event)"
		[guid]="road.drivingMaterialGuid"
		label="Driving Material"></app-material-field>

	<app-material-field (changed)="onSidewalkMaterialChanged($event)"
		[guid]="road.sidewalkMaterialGuid"
		label="Sidewalk Material"></app-material-field>

	<app-material-field (changed)="onBorderMaterialChanged($event)"
		[guid]="road.borderMaterialGuid"
		label="Border Material"></app-material-field>

	<app-material-field (changed)="onShoulderMaterialChanged($event)"
		[guid]="road.shoulderMaterialGuid"
		label="Shoulder Material"></app-material-field>

	<div *ngIf="controlPoint"
		class="inspector-editor-padding">
		<app-vector3-field (changed)="onControlPointChanged($event)"
			[value]="controlPoint.position"
			[z]="false"
			label="Control Point"></app-vector3-field>
		<app-enum-field [disabled]="true"
			*ngIf="segmentType"
			[enum]="segmentTypes"
			[value]="segmentType"
			label="Segment Type">
		</app-enum-field>
	</div>

</div>

<div *ngIf="isOpen && road"
	class="inspector-editor-padding">

	<button (click)="exportRoadStyle()"
		mat-stroked-button
		style="width: 100%;">Export Road Style
	</button>

	<button *ngIf="controlPoint" (click)="deleteControlPoint(controlPoint)"
		mat-stroked-button
		style="width: 100%;">Delete Control Point
	</button>

	<button *ngIf="data.spline" (click)="deleteSpline(data.spline)"
		mat-stroked-button
		style="width: 100%;">Delete Spline
	</button>

	<div *ngIf="!isProduction">

		<div *ngFor="let geometry of road.geometries">
			<div>
				<app-enum-field [enum]="segmentTypes"
					[value]="geometry.geometryType"
					label="Geometry Type">
				</app-enum-field>
                <app-vector3-field [disabled]="true"
                                   [value]="geometry.startV3"
                                   label="Start">
                </app-vector3-field>
                <app-double-field [disabled]="true"
                                  [value]="geometry.hdg"
                                  label="Hdg">
                </app-double-field>
                <app-double-field [disabled]="true"
                                  [value]="geometry.length"
                                  label="Length">
                </app-double-field>
				 <app-double-field [disabled]="true"
                                  [value]="geometry['curvStart'] || geometry['curvature']"
                                  label="Curvature Start">
                </app-double-field>
				<app-double-field [disabled]="true"
                                  [value]="geometry['curvEnd'] || geometry['curvature']"
                                  label="Curvature End">
                </app-double-field>
                <br/>
			</div>
		</div>
	</div>
</div>
